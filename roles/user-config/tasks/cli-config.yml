- name: ensure .ssh directory exists
  file:
    path: ~/.ssh
    state: directory

- name: update ssh config
  copy:
    src: ssh-config-{{ config_variant }}
    dest: ~/.ssh/config
    backup: yes

- name: add my keys to authorized keys
  lineinfile:
    dest: ~/.ssh/authorized_keys
    line: "{{ item }}"
    create: yes
  with_items:
    - "{{ id_rsa_personal_2c6819cb_public_key }}"
    - "{{ id_rsa_codilime_5260631d_public_key }}"

- name: update ansible-system-setup remote
  lineinfile:
    dest: ~/.config/ansible-system-setup/.git/config
    regexp: url = .*ansible-system-setup
    line: "	url = {{ this_repo_remote }}"

- name: set commit authorship metadata in ansible-system-setup
  blockinfile:
    dest: ~/.config/ansible-system-setup/.git/config
    block: |
      [user]
      	name = Jan Warcho≈Ç
      	email = jan.warchol@gmail.com
